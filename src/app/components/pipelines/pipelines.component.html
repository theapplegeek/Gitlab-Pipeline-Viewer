<div class="p-component tw-px-16 tw-h-full tw-flex tw-flex-col">
    <p class="f-header tw-mt-5 tw-mb-10">Pipelines</p>
    <div class="tw-grid tw-grid-cols-8">
        <span class="tw-col-span-5 tw-me-2 p-float-label">
            <input class="tw-w-full" pInputText id="search" [(ngModel)]="search"/>
            <label htmlFor="search">Project name or group name</label>
        </span>
        <span class="tw-me-2 tw-col-span-2 p-float-label">
            <p-dropdown styleClass="tw-w-full" [options]="statusList" [(ngModel)]="selectedStatus"
                        id="status-select" placeholder="Select status"
                        inputId="status-select"></p-dropdown>
            <label for="status-select">Pipeline status</label>
        </span>
        <p-button styleClass="tw-w-full" icon="pi pi-search" label="Search"
                  (click)="getProjectsAndPipelines()"></p-button>
    </div>
    <div class="tw-mt-8 tw-mb-5" *ngIf="projects.length > 0">
        <p-accordion [multiple]="true">
            <p-accordionTab *ngFor="let project of projects">
                <ng-template pTemplate="header">
                    <span class="tw-me-auto tw-flex tw-items-center">
                        <img class="tw-me-2" src="assets/gitlab/project.svg" alt="Gitlab project icon"/>
                        <span>{{project.name}}</span>
                    </span>
                    <span class="tw-flex tw-align-middle tw-items-center">
                        <app-pipeline-status-icon class="tw-me-4 tw-flex tw-items-center" [size]="24"
                                [status]="project.pipelines.nodes[0].status"></app-pipeline-status-icon>
                        <span>Last update: {{project.lastActivityAt | date: 'dd/MM/yyyy mm:hh'}}</span>
                    </span>
                </ng-template>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                    aliquip ex ea commodo
                    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat
                    nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
                    mollit anim id est laborum.
                </p>
            </p-accordionTab>
        </p-accordion>
    </div>
    <div class="tw-flex-grow tw-my-5" *ngIf="projects.length == 0">
        <div class="tw-flex tw-justify-center tw-items-center tw-h-full">
            <p class="tw-text-gray-200">No projects found</p>
        </div>
    </div>
</div>
